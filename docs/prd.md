# Hoops MVP - PRD (Product Requirements Document)

> 버전: 1.0
> 최종 수정일: 2025-01-10
> 상태: Draft

---

## 1. 프로젝트 개요

### 1.1 프로젝트명
**Hoops** - 농구 경기 매칭 플랫폼

### 1.2 한 줄 요약
> "농구하고 싶을 때, 함께 할 사람과 장소를 쉽게 찾는 서비스"

### 1.3 핵심 목표
- **1차 목표**: 최소 기능으로 빠른 시장 검증
- **검증 가설**: 온라인에서 농구 경기를 모집하면 실제 참가로 이어지는가?
- **출시 형태**: 실동작하는 웹 서비스 (모바일 웹 포함)

### 1.4 핵심 가치
| 가치 | 설명 |
|------|------|
| **즉시성** | 지금 바로 근처에서 열리는 경기를 찾고 참가 |
| **단순함** | 복잡한 절차 없이 3단계 이내로 참가 완료 |
| **신뢰성** | 호스트-참가자 간 명확한 약속 시스템 |

---

## 2. 문제 정의 (Problem Statement)

### 2.1 핵심 문제

#### 문제 1: 농구할 사람 찾기 어려움
```
현상: 농구는 최소 4명 이상이 필요하지만, 평일이나 갑자기 운동하고 싶을 때
      함께 할 사람을 모으기 어렵다.

원인:
- 기존 동호회는 정기 모임 위주로 유연성 부족
- 개인 인맥으로만 모집 가능 (확장성 한계)
- SNS/단톡방은 모집 관리가 어려움 (누가 오는지, 몇 명인지 불분명)

결과:
- 농구를 하고 싶어도 못 하는 사람들 존재
- 경기가 성사되어도 인원 미달로 취소되는 경우 빈번
```

#### 문제 2: 농구장 정보 접근성
```
현상: 주변에 어떤 농구장이 있는지, 어디서 경기를 할 수 있는지 알기 어렵다.

원인:
- 공공 농구장 정보가 산재되어 있음
- 사설 농구장은 검색이 어려움
- 장소별 특성 (코트 상태, 조명, 실내/외) 정보 부족

결과:
- 익숙한 장소에서만 계속 플레이
- 새로운 동네로 이사 시 적응 어려움
```

### 2.2 현재 대안과 한계

| 대안 | 한계 |
|------|------|
| 카카오톡 단체방 | 인원 관리 어려움, 참석 여부 불명확, 히스토리 관리 불가 |
| 동호회 카페 | 정기 모임 위주, 신규 가입 허들, 유연성 부족 |
| 소모임 앱 | 농구 특화 아님, 경기 단위 관리 미지원 |
| 직접 농구장 방문 | 우연에 의존, 비효율적 |

### 2.3 우리의 솔루션
```
Hoops는 "경기" 단위로 모집-참가-관리하는 플랫폼이다.

1. 호스트가 경기를 생성한다 (언제, 어디서, 몇 명)
2. 주변 사용자가 경기를 발견하고 참가 신청한다
3. 경기 당일, 약속된 장소에서 함께 농구를 한다

핵심 차별점:
- 경기 단위의 명확한 약속 (날짜, 시간, 장소, 인원)
- 위치 기반 탐색 (내 주변 경기만 보임)
- 참가 상태 관리 (정원, 현재 인원, 참가자 목록)
```

---

## 3. 해결 범위 (Scope Definition)

### 3.1 In Scope (MVP에 포함)

#### 사용자 인증
| 기능 | 설명 | 우선순위 |
|------|------|---------|
| 카카오 로그인 | OAuth 2.0 소셜 로그인 | P0 |
| 회원가입 완료 | 닉네임 설정 | P0 |
| JWT 토큰 관리 | Access/Refresh Token | P0 |

#### 경기 (Match)
| 기능 | 설명 | 우선순위 |
|------|------|---------|
| 경기 생성 | 날짜, 시간, 장소, 인원 설정 | P0 |
| 경기 목록 조회 | 위치 기반 필터링 | P0 |
| 경기 상세 조회 | 경기 정보 + 참가자 현황 | P0 |
| 경기 취소 | 호스트만 가능 | P1 |

#### 참가 (Participation)
| 기능 | 설명 | 우선순위 |
|------|------|---------|
| 참가 신청 | 경기에 참가 신청 | P0 |
| 참가 취소 | 본인 참가 취소 | P0 |
| 참가자 목록 조회 | 경기별 참가자 확인 | P1 |

#### 장소 (Location)
| 기능 | 설명 | 우선순위 |
|------|------|---------|
| 장소 추가 | 사용자가 농구장 등록 | P0 |
| 장소 목록 조회 | 등록된 장소 조회 | P2 |

#### 사용자 (User)
| 기능 | 설명 | 우선순위 |
|------|------|---------|
| 내 정보 조회 | 프로필 정보 | P1 |
| 내 참가 경기 | 참가한 경기 목록 | P1 |
| 내가 만든 경기 | 호스트인 경기 목록 | P1 |

### 3.2 Out of Scope (MVP에서 제외)

| 기능 | 제외 이유 | 향후 고려 |
|------|----------|----------|
| 실시간 채팅 | 구현 복잡도 높음 | Phase 2 |
| 팀 매칭 | 개인 매칭 검증 후 | Phase 2 |
| 사용자 평점/리뷰 | 핵심 플로우 검증 우선 | Phase 2 |
| 정기 경기 (반복) | 단발성 경기 먼저 | Phase 2 |
| 결제 (유료 경기) | 무료 경기로 시작 | Phase 3 |
| 푸시 알림 | 웹 앱 기반 MVP | Phase 2 |
| 네이버/구글 로그인 | 카카오만 먼저 | Phase 2 |
| 어드민 대시보드 | DB 직접 관리 | Phase 2 |

### 3.3 경계 조건 (Edge Cases)

#### 경기 생성
- 과거 날짜로 생성 불가
- 시작 시간 > 종료 시간 불가
- 최소 인원: 4명 (농구 특성)
- 최대 인원: 제한 없음 (호스트 재량)

#### 참가
- 호스트는 자신의 경기에 참가 신청 불가 (이미 참가자)
- 정원 초과 시 참가 불가
- 동일 경기 중복 참가 불가
- 경기 시작 후 참가/취소 불가

#### 동시성
- 동시 참가 신청 시 낙관적 락으로 처리
- 재시도 로직 적용 (최대 3회)

---

## 4. 타겟 사용자

### 4.1 Primary User: 경기 참가자
```
프로필:
- 연령대: 20-30대
- 특징: 농구를 좋아하지만 함께 할 사람이 부족한 개인
- 니즈: 원할 때 근처에서 농구 경기에 참가하고 싶음
- 행동: 퇴근 후, 주말에 농구장 근처에서 경기 검색

사용 시나리오:
1. 토요일 오후, 집 근처에서 열리는 경기 검색
2. 마음에 드는 경기 발견, 상세 정보 확인
3. 참가 신청
4. 경기 당일 장소 방문, 농구
```

### 4.2 Secondary User: 경기 호스트
```
프로필:
- 연령대: 20-40대
- 특징: 농구 동호회/모임 리더, 또는 경기를 주도적으로 기획하는 사람
- 니즈: 경기를 효율적으로 모집하고 관리하고 싶음
- 행동: 정기적으로 경기를 생성하고 참가자 관리

사용 시나리오:
1. 이번 주 토요일 경기 생성
2. 참가 신청 현황 확인
3. 정원 도달 시 모집 마감
4. 경기 당일 진행
```

### 4.3 User Persona

#### Persona 1: 직장인 농구러 "민수" (참가자)
```
- 28세, IT 회사 개발자
- 대학 시절 농구 동아리 활동
- 직장 생활 후 농구할 기회 급감
- "퇴근하고 한 게임 하고 싶은데 같이 할 사람이 없어요"
- 주 1-2회 농구 희망, 하지만 실제로는 월 1-2회
```

#### Persona 2: 동호회 리더 "지훈" (호스트)
```
- 35세, 자영업
- 10년 경력의 농구 동호회 운영자
- "카톡으로 인원 모집하는 게 너무 힘들어요"
- 주 2회 정기 경기 + 비정기 경기 운영
- 참가자 관리, 노쇼 방지에 관심
```

---

## 5. 기술 스택

### 5.1 Backend
| 구분 | 기술 | 버전 |
|------|------|------|
| Language | Java | 17 |
| Framework | Spring Boot | 3.x |
| ORM | JPA/Hibernate | - |
| Database | MySQL | 8.x |
| Message Queue | Kafka | - |
| Test | JUnit 5, Cucumber | - |

### 5.2 Architecture
- **Hexagonal Architecture** (Ports & Adapters)
- **DDD** (Domain Driven Design)
- Pure Domain (POJO, 외부 의존성 없음)
- UseCase별 Service 분리

### 5.3 인증
- Kakao OAuth 2.0
- JWT (Access Token + Refresh Token)

### 5.4 인프라 (예정)
| 구분 | 기술 |
|------|------|
| Cloud | AWS 또는 GCP |
| Container | Docker |
| CI/CD | GitHub Actions |
| Monitoring | - |

---

## 6. 개발 우선순위 (Phase)

### Phase 1: 핵심 인프라 ✅ 완료
- [x] 프로젝트 셋업 (Spring Boot, Hexagonal 구조)
- [x] DB 스키마 설계
- [x] 카카오 OAuth 연동
- [x] JWT 토큰 관리
- [x] 기본 예외 처리 체계

### Phase 2: 핵심 기능 ✅ 완료
- [x] 경기 생성 API
- [x] 경기 목록 조회 API (위치 기반)
- [x] 경기 상세 조회 API
- [x] 경기 참가 신청 API
- [x] 경기 참가 취소 API
- [x] 장소 추가 API

### Phase 3: 사용자 경험 🔄 진행 중
- [ ] 내 프로필 조회 API
- [ ] 내 참가 경기 목록 API
- [ ] 내가 만든 경기 목록 API
- [ ] 참가자 목록 조회 API

### Phase 4: 운영 필수
- [ ] 경기 취소 API (호스트)
- [ ] 경기 상태 자동 변경 스케줄러
- [ ] 장소 목록 조회 API

### Phase 5: 알림 시스템
- [ ] 알림 도메인 구현
- [ ] 참가 신청/취소 알림
- [ ] 경기 임박 알림
- [ ] Kafka 이벤트 연동

### Phase 6: 테스트 & 배포
- [ ] 통합 테스트 확대
- [ ] WireMock (외부 API 모킹)
- [ ] 배포 환경 구성
- [ ] 모니터링 설정

---

## 7. 성공 지표 (MVP 검증 기준)

### 7.1 정량적 지표

| 지표 | 목표 | 측정 방법 |
|------|------|----------|
| 회원가입 수 | 100명 | DB users 테이블 |
| 경기 생성 수 | 50건 | DB matches 테이블 |
| 참가 신청 수 | 200건 | DB participations 테이블 |
| 실제 경기 성사율 | 60% | ENDED 상태 경기 / 전체 경기 |
| 재참가율 | 30% | 2회 이상 참가한 사용자 비율 |

### 7.2 정성적 지표

| 지표 | 측정 방법 |
|------|----------|
| 사용자 피드백 | 설문 조사, 인터뷰 |
| 주요 불편 사항 | 피드백 분석 |
| 재사용 의향 | NPS 점수 |

### 7.3 기술 검증 항목

| 항목 | 검증 내용 |
|------|----------|
| 아키텍처 | Hexagonal + DDD 조합의 유지보수성 |
| 동시성 | 낙관적 락의 실효성 |
| 위치 기반 | 공간 인덱스 성능 |
| 인증 | Kakao OAuth + JWT 안정성 |

---

## 8. 제약사항 및 주의사항

### 8.1 기술적 제약
- 실시간 기능 (채팅, 푸시) 없음 - MVP 범위 외
- 모바일 앱 없음 - 웹 기반 (반응형)
- 어드민 없음 - Supabase/DB 직접 관리

### 8.2 비즈니스 제약
- 무료 서비스 (결제 기능 없음)
- 경기 취소 페널티 없음 (MVP에서는)
- 노쇼 관리 시스템 없음 (MVP에서는)

### 8.3 운영 제약
- 고객 지원 채널 미정
- 분쟁 중재 정책 미정
- 개인정보 처리방침 필요

---

## 9. 핵심 사용자 플로우

### 9.1 참가자 플로우
```
[회원가입]
카카오 로그인 → 닉네임 입력 → 가입 완료

[경기 참가]
홈 화면 → 위치 기반 경기 목록 → 경기 선택 → 상세 정보 확인 → 참가 신청 → 완료

[참가 취소]
마이페이지 → 내 참가 경기 → 취소하기 → 완료
```

### 9.2 호스트 플로우
```
[경기 생성]
로그인 → 경기 생성 → 장소 선택/등록 → 날짜/시간 설정 → 인원 설정 → 생성 완료

[참가자 관리]
마이페이지 → 내가 만든 경기 → 경기 선택 → 참가자 목록 확인

[경기 취소]
마이페이지 → 내가 만든 경기 → 경기 선택 → 경기 취소
```

---

## 10. 문서 연계

| 문서 | 위치 | 설명 |
|------|------|------|
| MVP 기능 체크리스트 | `docs/spec/mvp-features.md` | 상세 구현 현황 |
| 아키텍처 가이드 | `docs/architecture/architecture.md` | 기술 구조 |
| 코딩 컨벤션 | `docs/convention/convention.md` | 코드 작성 규칙 |
| DB 스키마 | `docs/spec/schema.md` | 데이터 모델 |
| API 명세 | `docs/api/*.md` | 엔드포인트별 상세 |
| 시퀀스 다이어그램 | `docs/sequence/*.md` | 플로우별 상세 |

---

## 변경 이력

| 버전 | 날짜 | 변경 내용 | 작성자 |
|------|------|----------|--------|
| 1.0 | 2025-01-10 | 최초 작성 | - |
