# UI/UX 가이드

> 이 문서는 **같은 위치에 여러 경기가 있을 때의 UI/UX 처리 방법**을 정의합니다.

---

## 🗺️ 지도 화면 - 같은 위치 여러 경기 처리

### 문제 상황

```
같은 코트, 같은 시간대에 여러 경기가 생성 가능
→ 지도에서 같은 위치에 여러 마커가 겹침
→ 사용자가 특정 경기를 선택하기 어려움
```

---

## 💡 해결 방안

### 방안 1: 마커 숫자 배지 표시 (권장)

```
같은 위치에 경기가 여러 개 있을 때:
  → 마커에 숫자 배지 표시 (예: "3")
  → 마커 클릭 시 해당 위치의 경기 목록 팝업
  → 사용자가 원하는 경기 선택
  → 선택한 경기의 상세 정보 표시
```

#### 장점
- 직관적: 사용자가 한눈에 여러 경기가 있음을 알 수 있음
- 간결함: 마커 하나로 여러 경기를 표현
- 성능: 마커 수가 줄어들어 지도 렌더링 성능 향상

#### UI 예시

```
지도 화면:
  📍 (3) ← 숫자 배지가 있는 마커

마커 클릭 시:
┌─────────────────────────────────┐
│  광주 시청 농구장 (3개 경기)    │
│  📍 1.2km                       │
│                                 │
│  ┌───────────────────────────┐  │
│  │ 📅 오후 6:00 - 8:00      │  │
│  │ 👥 2/4명 | ⭐ 4.5       │  │
│  │ Host: 민혁               │  │
│  │ [ 자세히 보기 ]          │  │
│  └───────────────────────────┘  │
│                                 │
│  ┌───────────────────────────┐  │
│  │ 📅 오후 7:00 - 9:00      │  │
│  │ 👥 1/4명 | ⭐ 4.2       │  │
│  │ Host: 철수               │  │
│  │ [ 자세히 보기 ]          │  │
│  └───────────────────────────┘  │
│                                 │
│  ┌───────────────────────────┐  │
│  │ 📅 오후 8:00 - 10:00     │  │
│  │ 👥 3/4명 | ⭐ 4.8       │  │
│  │ Host: 영희               │  │
│  │ [ 자세히 보기 ]          │  │
│  └───────────────────────────┘  │
│                                 │
│  [ 닫기 ]                       │
└─────────────────────────────────┘
```

---

### 방안 2: 마커 오프셋 (대안)

```
같은 위치에 경기가 여러 개 있을 때:
  → 마커를 약간씩 옆으로 이동시켜 표시
  → 각 마커는 독립적으로 클릭 가능
```

#### 장점
- 각 경기를 개별 마커로 표시
- 클릭 단계 감소 (바로 경기 상세 정보)

#### 단점
- 마커가 너무 많으면 지저분해 보임
- 줌 레벨에 따라 마커 겹침 문제 재발생
- 성능 저하 가능

---

## 📋 경기 목록 정렬 규칙

### 정렬 우선순위

```
1순위: 경기 시작 시간 (가까운 시간 순)
2순위: 승인된 참여자 수 (많은 순)
3순위: Host 신뢰도 (높은 순)
```

### 예시

```
현재 시간: 오후 5:30

정렬 결과:
1. 오후 6:00 - 8:00 (30분 후 시작)
2. 오후 7:00 - 9:00 (1시간 30분 후 시작)
3. 오후 8:00 - 10:00 (2시간 30분 후 시작)
```

---

## 🎨 마커 디자인

### 마커 상태별 색상

| 상태 | 색상 | 설명 |
|------|------|------|
| **RECRUITING** | 녹색 | 모집 중 |
| **CONFIRMED** | 회색 | 확정됨 (신청 불가) |
| **여러 경기** | 녹색 + 숫자 | 같은 위치에 여러 경기 |

### 마커 숫자 배지

```
마커 위에 작은 원형 배지로 숫자 표시
  - 배경: 빨간색 또는 주황색 (눈에 띄도록)
  - 텍스트: 흰색, 볼드
  - 크기: 마커의 1/3 정도
  - 위치: 마커 우측 상단
```

---

## 📱 모바일 UX 고려사항

### 경기 목록 팝업

```
모바일 화면 (세로 모드):
  - 바텀 시트 형태로 표시
  - 스와이프로 닫기 가능
  - 경기당 카드 높이: 80-100px
  - 최대 표시 개수: 5개 (스크롤 가능)

태블릿/데스크톱:
  - 모달 팝업 형태
  - 경기당 카드 높이: 100-120px
  - 최대 표시 개수: 제한 없음 (스크롤)
```

### 터치 영역

```
모바일에서 터치 영역:
  - 마커: 최소 44x44pt (Apple HIG 기준)
  - 경기 카드: 전체 영역 클릭 가능
  - "자세히 보기" 버튼: 최소 44x44pt
```

---

## 🔄 실시간 업데이트

### 경기 목록 변화 처리

```
상황: 경기 목록 팝업이 열려있는 동안 경기가 확정됨
  → WebSocket으로 실시간 업데이트 수신
  → 해당 경기 카드의 상태 변경
  → "확정됨 (신청 마감)" 표시
  → "자세히 보기" 버튼 비활성화 또는 제거
```

### 경기가 모두 확정된 경우

```
상황: 같은 위치의 모든 경기가 확정됨
  → 마커 색상 변경: 녹색 → 회색
  → 마커 숫자 배지 제거 (선택적)
  → 클릭 시 "모든 경기가 확정되었습니다" 메시지
```

---

## ⚡ 성능 최적화

### 마커 관리

```
같은 위치 경기 그룹화:
  1. 서버에서 경기 목록 조회
  2. 클라이언트에서 같은 위치 (위도, 경도) 경기 그룹화
  3. 그룹당 마커 1개 생성
  4. 마커 데이터에 경기 목록 배열 저장
```

### 예시 코드 (개념)

```javascript
// 경기를 위치별로 그룹화
const groupedMatches = matches.reduce((acc, match) => {
  const key = `${match.court.latitude},${match.court.longitude}`;
  if (!acc[key]) {
    acc[key] = [];
  }
  acc[key].push(match);
  return acc;
}, {});

// 그룹당 마커 1개 생성
Object.entries(groupedMatches).forEach(([location, matchList]) => {
  const marker = new Marker({
    position: parseLocation(location),
    badge: matchList.length > 1 ? matchList.length : null,
    data: matchList
  });
  map.addMarker(marker);
});
```

---

## 📊 경기 목록 필터링 (선택적 기능)

### 필터 옵션

```
경기 목록 팝업에 필터 추가 (선택적):
  - 시간대: 오전/오후/저녁
  - 인원: 1명 남음 / 2명 이상 남음
  - Host 신뢰도: 4.0 이상 / 4.5 이상
```

### UI 예시

```
┌─────────────────────────────────┐
│  광주 시청 농구장 (5개 경기)    │
│                                 │
│  [ 필터 ] 시간대: 전체 ▼       │
│           인원: 전체 ▼          │
│                                 │
│  ┌───────────────────────────┐  │
│  │ 📅 오후 6:00 - 8:00      │  │
│  │ ...                      │  │
│  └───────────────────────────┘  │
│  ...                            │
└─────────────────────────────────┘
```

---

## ✅ 체크리스트

### 개발 구현 체크리스트

```
□ 같은 위치 경기 그룹화 로직 구현
□ 마커 숫자 배지 UI 구현
□ 경기 목록 팝업 UI 구현
□ 시간대별 정렬 로직 구현
□ 실시간 업데이트 처리 (WebSocket)
□ 모바일 터치 영역 확보 (최소 44x44pt)
□ 성능 테스트 (마커 100개 이상)
```

### UX 검증 체크리스트

```
□ 사용자가 여러 경기가 있음을 직관적으로 알 수 있는가?
□ 원하는 경기를 2번 클릭 이내로 선택 가능한가?
□ 경기 목록이 읽기 쉽게 정렬되어 있는가?
□ 모바일에서 터치 영역이 충분한가?
□ 실시간 업데이트가 자연스럽게 적용되는가?
```

---

**이 가이드를 따라 같은 위치의 여러 경기를 효과적으로 표시하세요!**
